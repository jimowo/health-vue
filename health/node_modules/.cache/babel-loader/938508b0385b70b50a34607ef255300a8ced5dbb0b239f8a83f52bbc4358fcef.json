{"ast":null,"code":"import store from \"@/store\";\nimport Vue from \"vue\";\n\n/**\r\n * 自定义指令\r\n * 第一个参数是指令\r\n * 第二个参数是实现方法\r\n */\nVue.directive(\"hasRole\", {\n  inserted(el, binding) {\n    // 获取指令传递过来的数据\n    const {\n      value\n    } = binding;\n    // 获取vuex 中的角色信息\n    const roles = store.state.roles;\n    // 定义超级管理员可以查看所有\n    const admin = \"SUPER_ADMIN\";\n    // 判断指令是否传值 传递的值是否是一个数组 数组是否大于0\n    if (value && value instanceof Array && value.length > 0) {\n      /**\r\n       * some() 用于检测数组中的元素是否满足指定的条件 并不会改变原来的数组\r\n       */\n      const hasRole = roles.some(item => {\n        return item.code === admin || value.includes(item.code);\n      });\n      if (!hasRole) {\n        // 把对应的元素删除\n        el.parentNode.removeChild(el);\n      }\n    }\n  }\n});","map":{"version":3,"names":["store","Vue","directive","inserted","el","binding","value","roles","state","admin","Array","length","hasRole","some","item","code","includes","parentNode","removeChild"],"sources":["C:/Users/12524/Documents/health-vue/health/src/utils/permission.js"],"sourcesContent":["import store from \"@/store\";\r\nimport Vue from \"vue\";\r\n\r\n/**\r\n * 自定义指令\r\n * 第一个参数是指令\r\n * 第二个参数是实现方法\r\n */\r\nVue.directive(\"hasRole\", {\r\n  inserted(el, binding) {\r\n    // 获取指令传递过来的数据\r\n    const { value } = binding;\r\n    // 获取vuex 中的角色信息\r\n    const roles = store.state.roles;\r\n    // 定义超级管理员可以查看所有\r\n    const admin = \"SUPER_ADMIN\";\r\n    // 判断指令是否传值 传递的值是否是一个数组 数组是否大于0\r\n    if (value && value instanceof Array && value.length > 0) {\r\n      /**\r\n       * some() 用于检测数组中的元素是否满足指定的条件 并不会改变原来的数组\r\n       */\r\n      const hasRole = roles.some(item => {\r\n        return item.code === admin || value.includes(item.code);\r\n      });\r\n      if (!hasRole) {\r\n        // 把对应的元素删除\r\n        el.parentNode.removeChild(el);\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,SAAS;AAC3B,OAAOC,GAAG,MAAM,KAAK;;AAErB;AACA;AACA;AACA;AACA;AACAA,GAAG,CAACC,SAAS,CAAC,SAAS,EAAE;EACvBC,QAAQ,CAACC,EAAE,EAAEC,OAAO,EAAE;IACpB;IACA,MAAM;MAAEC;IAAM,CAAC,GAAGD,OAAO;IACzB;IACA,MAAME,KAAK,GAAGP,KAAK,CAACQ,KAAK,CAACD,KAAK;IAC/B;IACA,MAAME,KAAK,GAAG,aAAa;IAC3B;IACA,IAAIH,KAAK,IAAIA,KAAK,YAAYI,KAAK,IAAIJ,KAAK,CAACK,MAAM,GAAG,CAAC,EAAE;MACvD;AACN;AACA;MACM,MAAMC,OAAO,GAAGL,KAAK,CAACM,IAAI,CAACC,IAAI,IAAI;QACjC,OAAOA,IAAI,CAACC,IAAI,KAAKN,KAAK,IAAIH,KAAK,CAACU,QAAQ,CAACF,IAAI,CAACC,IAAI,CAAC;MACzD,CAAC,CAAC;MACF,IAAI,CAACH,OAAO,EAAE;QACZ;QACAR,EAAE,CAACa,UAAU,CAACC,WAAW,CAACd,EAAE,CAAC;MAC/B;IACF;EACF;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}