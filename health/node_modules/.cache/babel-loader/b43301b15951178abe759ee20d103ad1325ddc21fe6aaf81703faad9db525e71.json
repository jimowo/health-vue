{"ast":null,"code":"import Vue from \"vue\";\nimport axios from \"axios\";\nimport { Message } from \"element-ui\";\nimport router from \"@/router\";\n\n/**\n * 创建 ajax 实例\n * 并设置请求超时时间\n * @type {axios.AxiosInstance}\n */\nconst ajax = axios.create({\n  timeout: 100000\n});\n\n/**\n * 请求拦截器\n */\najax.interceptors.request.use(config => {\n  console.log(\"请求 \", config);\n  const token = sessionStorage.getItem(\"token\");\n  if (token) {\n    // 把token 加入header 中\n    config.headers[\"Authorization\"] = token;\n  }\n  return config;\n}, err => {\n  console.log(\"请求异常\", err);\n});\n\n/**\n * 响应拦截器\n */\najax.interceptors.response.use(res => {\n  console.log(res);\n  // 密码错误\n  // if (!res.data.status) {\n  //   Message.error(res.data.msg);\n  // }\n  return res.data;\n}, err => {\n  console.log(\"异常\", err);\n  if (err.response.status === 400) {\n    Message.error(err.response.data.msg);\n  } else if (err.response.status === 401) {\n    Message.error(\"您未登录，请登陆后操作！\");\n    // 跳转到登录页面\n    sessionStorage.clear();\n    router.replace(\"/login\");\n  } else if (err.response.status === 403) {\n    Message.error(err.response.data.msg);\n  } else if (err.response.status === 404) {\n    Message.error(\"后端接口未找到\");\n  } else if (err.response.status === 500) {\n    Message.error(\"后端异常--->\" + err.response.data.msg);\n  }\n  return err.data;\n});\nVue.prototype.$ajax = ajax;\nexport default ajax;","map":{"version":3,"names":["Vue","axios","Message","router","ajax","create","timeout","interceptors","request","use","config","console","log","token","sessionStorage","getItem","headers","err","response","res","data","status","error","msg","clear","replace","prototype","$ajax"],"sources":["C:/Users/12524/Documents/health-vue/health/src/utils/ajax.js"],"sourcesContent":["import Vue from \"vue\";\nimport axios from \"axios\";\nimport { Message } from \"element-ui\";\nimport router from \"@/router\";\n\n/**\n * 创建 ajax 实例\n * 并设置请求超时时间\n * @type {axios.AxiosInstance}\n */\nconst ajax = axios.create({\n  timeout: 100000,\n});\n\n/**\n * 请求拦截器\n */\najax.interceptors.request.use((config) => {\n  console.log(\"请求 \", config);\n  const token = sessionStorage.getItem(\"token\");\n  if (token) {\n    // 把token 加入header 中\n    config.headers[\"Authorization\"] = token;\n  }\n  return config;\n}, (err => {\n  console.log(\"请求异常\", err);\n  })\n);\n\n/**\n * 响应拦截器\n */\najax.interceptors.response.use(\n  (res) => {\n    console.log(res);\n    // 密码错误\n    // if (!res.data.status) {\n    //   Message.error(res.data.msg);\n    // }\n    return res.data;\n  },\n  (err) => {\n    console.log(\"异常\", err);\n    if (err.response.status === 400) {\n      Message.error(err.response.data.msg);\n    } else if (err.response.status === 401) {\n      Message.error(\"您未登录，请登陆后操作！\");\n      // 跳转到登录页面\n      sessionStorage.clear();\n      router.replace(\"/login\");\n    } else if (err.response.status === 403) {\n      Message.error(err.response.data.msg);\n    } else if (err.response.status === 404) {\n      Message.error(\"后端接口未找到\");\n    } else if (err.response.status === 500) {\n      Message.error(\"后端异常--->\" + err.response.data.msg);\n    }\n    return err.data;\n  }\n);\n\nVue.prototype.$ajax = ajax;\n\nexport default ajax;\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,YAAY;AACpC,OAAOC,MAAM,MAAM,UAAU;;AAE7B;AACA;AACA;AACA;AACA;AACA,MAAMC,IAAI,GAAGH,KAAK,CAACI,MAAM,CAAC;EACxBC,OAAO,EAAE;AACX,CAAC,CAAC;;AAEF;AACA;AACA;AACAF,IAAI,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EACxCC,OAAO,CAACC,GAAG,CAAC,KAAK,EAAEF,MAAM,CAAC;EAC1B,MAAMG,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;EAC7C,IAAIF,KAAK,EAAE;IACT;IACAH,MAAM,CAACM,OAAO,CAAC,eAAe,CAAC,GAAGH,KAAK;EACzC;EACA,OAAOH,MAAM;AACf,CAAC,EAAGO,GAAG,IAAI;EACTN,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEK,GAAG,CAAC;AACxB,CAAC,CACF;;AAED;AACA;AACA;AACAb,IAAI,CAACG,YAAY,CAACW,QAAQ,CAACT,GAAG,CAC3BU,GAAG,IAAK;EACPR,OAAO,CAACC,GAAG,CAACO,GAAG,CAAC;EAChB;EACA;EACA;EACA;EACA,OAAOA,GAAG,CAACC,IAAI;AACjB,CAAC,EACAH,GAAG,IAAK;EACPN,OAAO,CAACC,GAAG,CAAC,IAAI,EAAEK,GAAG,CAAC;EACtB,IAAIA,GAAG,CAACC,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;IAC/BnB,OAAO,CAACoB,KAAK,CAACL,GAAG,CAACC,QAAQ,CAACE,IAAI,CAACG,GAAG,CAAC;EACtC,CAAC,MAAM,IAAIN,GAAG,CAACC,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;IACtCnB,OAAO,CAACoB,KAAK,CAAC,cAAc,CAAC;IAC7B;IACAR,cAAc,CAACU,KAAK,EAAE;IACtBrB,MAAM,CAACsB,OAAO,CAAC,QAAQ,CAAC;EAC1B,CAAC,MAAM,IAAIR,GAAG,CAACC,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;IACtCnB,OAAO,CAACoB,KAAK,CAACL,GAAG,CAACC,QAAQ,CAACE,IAAI,CAACG,GAAG,CAAC;EACtC,CAAC,MAAM,IAAIN,GAAG,CAACC,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;IACtCnB,OAAO,CAACoB,KAAK,CAAC,SAAS,CAAC;EAC1B,CAAC,MAAM,IAAIL,GAAG,CAACC,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;IACtCnB,OAAO,CAACoB,KAAK,CAAC,UAAU,GAAGL,GAAG,CAACC,QAAQ,CAACE,IAAI,CAACG,GAAG,CAAC;EACnD;EACA,OAAON,GAAG,CAACG,IAAI;AACjB,CAAC,CACF;AAEDpB,GAAG,CAAC0B,SAAS,CAACC,KAAK,GAAGvB,IAAI;AAE1B,eAAeA,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}